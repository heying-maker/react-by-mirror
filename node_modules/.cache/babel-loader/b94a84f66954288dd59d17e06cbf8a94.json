{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = model;\nexports.models = void 0;\n\nvar _actions = require(\"./actions\");\n\nvar isObject = function isObject(target) {\n  return Object.prototype.toString.call(target) === '[object Object]';\n};\n\nvar models = [];\nexports.models = models;\n\nfunction model(m) {\n  var _validateModel = validateModel(m),\n      name = _validateModel.name,\n      reducers = _validateModel.reducers,\n      initialState = _validateModel.initialState,\n      effects = _validateModel.effects;\n\n  var reducer = getReducer((0, _actions.resolveReducers)(name, reducers), initialState);\n  var toAdd = {\n    name: name,\n    reducer: reducer\n  };\n  models.push(toAdd);\n  (0, _actions.addActions)(name, reducers, effects);\n  return toAdd;\n}\n\nfunction validateModel() {\n  var m = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var name = m.name,\n      reducers = m.reducers,\n      effects = m.effects;\n\n  if (!name || typeof name !== 'string') {\n    throw new Error(\"Model name must be a valid string!\");\n  }\n\n  if (name === 'routing') {\n    throw new Error(\"Model name can not be \\\"routing\\\", it is used by react-router-redux!\");\n  }\n\n  if (models.find(function (item) {\n    return item.name === name;\n  })) {\n    throw new Error(\"Model \\\"\".concat(name, \"\\\" has been created, please select another name!\"));\n  }\n\n  if (reducers !== undefined && !isObject(reducers)) {\n    throw new Error(\"Model reducers must be a valid object!\");\n  }\n\n  if (effects !== undefined && !isObject(effects)) {\n    throw new Error(\"Model effects must be a valid object!\");\n  }\n\n  m.reducers = filterReducers(reducers);\n  m.effects = filterReducers(effects);\n  return m;\n}\n\nfunction getReducer(reducers) {\n  var initialState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  return function () {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n\n    if (typeof reducers[action.type] === 'function') {\n      return reducers[action.type](state, action.data);\n    }\n\n    return state;\n  };\n}\n\nfunction filterReducers(reducers) {\n  if (!reducers) {\n    return reducers;\n  }\n\n  return Object.keys(reducers).reduce(function (acc, action) {\n    if (typeof reducers[action] === 'function') {\n      acc[action] = reducers[action];\n    }\n\n    return acc;\n  }, {});\n}","map":{"version":3,"sources":["/Users/admin/Desktop/鹤影/newapp/node_modules/_mirrorx@0.2.13@mirrorx/lib/model.js"],"names":["Object","defineProperty","exports","value","default","model","models","_actions","require","isObject","target","prototype","toString","call","m","_validateModel","validateModel","name","reducers","initialState","effects","reducer","getReducer","resolveReducers","toAdd","push","addActions","arguments","length","undefined","Error","find","item","concat","filterReducers","state","action","type","data","keys","reduce","acc"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,OAAR,GAAkBC,KAAlB;AACAH,OAAO,CAACI,MAAR,GAAiB,KAAK,CAAtB;;AAEA,IAAIC,QAAQ,GAAGC,OAAO,CAAC,WAAD,CAAtB;;AAEA,IAAIC,QAAQ,GAAG,SAASA,QAAT,CAAkBC,MAAlB,EAA0B;AACvC,SAAOV,MAAM,CAACW,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BH,MAA/B,MAA2C,iBAAlD;AACD,CAFD;;AAIA,IAAIJ,MAAM,GAAG,EAAb;AACAJ,OAAO,CAACI,MAAR,GAAiBA,MAAjB;;AAEA,SAASD,KAAT,CAAeS,CAAf,EAAkB;AAChB,MAAIC,cAAc,GAAGC,aAAa,CAACF,CAAD,CAAlC;AAAA,MACIG,IAAI,GAAGF,cAAc,CAACE,IAD1B;AAAA,MAEIC,QAAQ,GAAGH,cAAc,CAACG,QAF9B;AAAA,MAGIC,YAAY,GAAGJ,cAAc,CAACI,YAHlC;AAAA,MAIIC,OAAO,GAAGL,cAAc,CAACK,OAJ7B;;AAMA,MAAIC,OAAO,GAAGC,UAAU,CAAC,CAAC,GAAGf,QAAQ,CAACgB,eAAb,EAA8BN,IAA9B,EAAoCC,QAApC,CAAD,EAAgDC,YAAhD,CAAxB;AACA,MAAIK,KAAK,GAAG;AACVP,IAAAA,IAAI,EAAEA,IADI;AAEVI,IAAAA,OAAO,EAAEA;AAFC,GAAZ;AAIAf,EAAAA,MAAM,CAACmB,IAAP,CAAYD,KAAZ;AACA,GAAC,GAAGjB,QAAQ,CAACmB,UAAb,EAAyBT,IAAzB,EAA+BC,QAA/B,EAAyCE,OAAzC;AACA,SAAOI,KAAP;AACD;;AAED,SAASR,aAAT,GAAyB;AACvB,MAAIF,CAAC,GAAGa,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAAzC,GAAqDF,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAA5E;AACA,MAAIV,IAAI,GAAGH,CAAC,CAACG,IAAb;AAAA,MACIC,QAAQ,GAAGJ,CAAC,CAACI,QADjB;AAAA,MAEIE,OAAO,GAAGN,CAAC,CAACM,OAFhB;;AAIA,MAAI,CAACH,IAAD,IAAS,OAAOA,IAAP,KAAgB,QAA7B,EAAuC;AACrC,UAAM,IAAIa,KAAJ,CAAU,oCAAV,CAAN;AACD;;AAED,MAAIb,IAAI,KAAK,SAAb,EAAwB;AACtB,UAAM,IAAIa,KAAJ,CAAU,sEAAV,CAAN;AACD;;AAED,MAAIxB,MAAM,CAACyB,IAAP,CAAY,UAAUC,IAAV,EAAgB;AAC9B,WAAOA,IAAI,CAACf,IAAL,KAAcA,IAArB;AACD,GAFG,CAAJ,EAEI;AACF,UAAM,IAAIa,KAAJ,CAAU,WAAWG,MAAX,CAAkBhB,IAAlB,EAAwB,kDAAxB,CAAV,CAAN;AACD;;AAED,MAAIC,QAAQ,KAAKW,SAAb,IAA0B,CAACpB,QAAQ,CAACS,QAAD,CAAvC,EAAmD;AACjD,UAAM,IAAIY,KAAJ,CAAU,wCAAV,CAAN;AACD;;AAED,MAAIV,OAAO,KAAKS,SAAZ,IAAyB,CAACpB,QAAQ,CAACW,OAAD,CAAtC,EAAiD;AAC/C,UAAM,IAAIU,KAAJ,CAAU,uCAAV,CAAN;AACD;;AAEDhB,EAAAA,CAAC,CAACI,QAAF,GAAagB,cAAc,CAAChB,QAAD,CAA3B;AACAJ,EAAAA,CAAC,CAACM,OAAF,GAAYc,cAAc,CAACd,OAAD,CAA1B;AACA,SAAON,CAAP;AACD;;AAED,SAASQ,UAAT,CAAoBJ,QAApB,EAA8B;AAC5B,MAAIC,YAAY,GAAGQ,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAAzC,GAAqDF,SAAS,CAAC,CAAD,CAA9D,GAAoE,IAAvF;AACA,SAAO,YAAY;AACjB,QAAIQ,KAAK,GAAGR,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAAzC,GAAqDF,SAAS,CAAC,CAAD,CAA9D,GAAoER,YAAhF;AACA,QAAIiB,MAAM,GAAGT,SAAS,CAACC,MAAV,GAAmB,CAAnB,GAAuBD,SAAS,CAAC,CAAD,CAAhC,GAAsCE,SAAnD;;AAEA,QAAI,OAAOX,QAAQ,CAACkB,MAAM,CAACC,IAAR,CAAf,KAAiC,UAArC,EAAiD;AAC/C,aAAOnB,QAAQ,CAACkB,MAAM,CAACC,IAAR,CAAR,CAAsBF,KAAtB,EAA6BC,MAAM,CAACE,IAApC,CAAP;AACD;;AAED,WAAOH,KAAP;AACD,GATD;AAUD;;AAED,SAASD,cAAT,CAAwBhB,QAAxB,EAAkC;AAChC,MAAI,CAACA,QAAL,EAAe;AACb,WAAOA,QAAP;AACD;;AAED,SAAOlB,MAAM,CAACuC,IAAP,CAAYrB,QAAZ,EAAsBsB,MAAtB,CAA6B,UAAUC,GAAV,EAAeL,MAAf,EAAuB;AACzD,QAAI,OAAOlB,QAAQ,CAACkB,MAAD,CAAf,KAA4B,UAAhC,EAA4C;AAC1CK,MAAAA,GAAG,CAACL,MAAD,CAAH,GAAclB,QAAQ,CAACkB,MAAD,CAAtB;AACD;;AAED,WAAOK,GAAP;AACD,GANM,EAMJ,EANI,CAAP;AAOD","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = model;\nexports.models = void 0;\n\nvar _actions = require(\"./actions\");\n\nvar isObject = function isObject(target) {\n  return Object.prototype.toString.call(target) === '[object Object]';\n};\n\nvar models = [];\nexports.models = models;\n\nfunction model(m) {\n  var _validateModel = validateModel(m),\n      name = _validateModel.name,\n      reducers = _validateModel.reducers,\n      initialState = _validateModel.initialState,\n      effects = _validateModel.effects;\n\n  var reducer = getReducer((0, _actions.resolveReducers)(name, reducers), initialState);\n  var toAdd = {\n    name: name,\n    reducer: reducer\n  };\n  models.push(toAdd);\n  (0, _actions.addActions)(name, reducers, effects);\n  return toAdd;\n}\n\nfunction validateModel() {\n  var m = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var name = m.name,\n      reducers = m.reducers,\n      effects = m.effects;\n\n  if (!name || typeof name !== 'string') {\n    throw new Error(\"Model name must be a valid string!\");\n  }\n\n  if (name === 'routing') {\n    throw new Error(\"Model name can not be \\\"routing\\\", it is used by react-router-redux!\");\n  }\n\n  if (models.find(function (item) {\n    return item.name === name;\n  })) {\n    throw new Error(\"Model \\\"\".concat(name, \"\\\" has been created, please select another name!\"));\n  }\n\n  if (reducers !== undefined && !isObject(reducers)) {\n    throw new Error(\"Model reducers must be a valid object!\");\n  }\n\n  if (effects !== undefined && !isObject(effects)) {\n    throw new Error(\"Model effects must be a valid object!\");\n  }\n\n  m.reducers = filterReducers(reducers);\n  m.effects = filterReducers(effects);\n  return m;\n}\n\nfunction getReducer(reducers) {\n  var initialState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  return function () {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n\n    if (typeof reducers[action.type] === 'function') {\n      return reducers[action.type](state, action.data);\n    }\n\n    return state;\n  };\n}\n\nfunction filterReducers(reducers) {\n  if (!reducers) {\n    return reducers;\n  }\n\n  return Object.keys(reducers).reduce(function (acc, action) {\n    if (typeof reducers[action] === 'function') {\n      acc[action] = reducers[action];\n    }\n\n    return acc;\n  }, {});\n}"]},"metadata":{},"sourceType":"script"}